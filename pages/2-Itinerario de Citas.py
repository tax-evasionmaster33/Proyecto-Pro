import streamlit as st
import json
from datetime import date
# Esta pagina se encarga de mostrar todas las citas segun un dia solicitado con todos sus recursos o de las citas pasadas pero con las mismas caracteristicas
ARCHIVO = "PerCitas.json"
ARCHIVO_ARCHIVO = "CitasArchivadas.json"

st.set_page_config(page_title="Itinerario de Citas")

st.title("ðŸ“‹ Itinerario de Citas")

# ESTO SON LAS FUNCIONES Q SE ENCARGAN DE MOSTRAR LAS CITAS 

def cargar_citas_activas():
    try:
        with open(ARCHIVO, "r", encoding="utf-8") as f:
            return json.load(f)
    except FileNotFoundError:
        return []

def cargar_citas_archivadas():
    try:
        with open(ARCHIVO_ARCHIVO, "r", encoding="utf-8") as f:
            data = json.load(f)
            return data if isinstance(data, dict) else {}
    except FileNotFoundError:
        return {}

# INTERFAZ

dia = st.date_input("ðŸ“… Seleccione un dÃ­a", value=date.today())

tab_activas, tab_archivadas = st.tabs(["ðŸŸ¢ Citas activas", "ðŸ•’ Citas archivadas"])

# Este pedazo muestra las " CITAS ACTIVAS "

with tab_activas:
    citas = cargar_citas_activas()
    citas_dia = [c for c in citas if c["fecha"] == str(dia)]

    if not citas_dia:
        st.info("No hay citas activas para este dÃ­a")
    else:
        st.dataframe(citas_dia, use_container_width=True, hide_index=True)

# Este pedazo muestra las " CITAS PASADAS "
with tab_archivadas:
    archivadas = cargar_citas_archivadas()
    dia_str = str(dia)

    if dia_str not in archivadas:
        st.warning("No hay citas archivadas para este dÃ­a")
    else:
        st.dataframe(
            archivadas[dia_str],
            use_container_width=True,
            hide_index=True
        )




































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































